<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sono Presta</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="assets/index-C6vqGjrn2.css" crossorigin />
  </head>
  <body>
    <div id="root"></div>

    <!-- Import JS en chemin relatif correct -->
    <script type="module">
      import { API } from "./assets/js/apiClient.js";
      import { normalizeCustomizer, defaultTheme } from "./assets/js/theme.js";

      async function boot() {
        const customizer = await API.getCustomizer();
        const theme = normalizeCustomizer(customizer?.data ?? {});
        applyTheme(theme);
      }

      function applyTheme(theme) {
        if (!theme) return;
        const root = document.documentElement;
        root.style.setProperty("--primary", theme.primary);
        root.style.setProperty("--secondary", theme.secondary);
        root.style.setProperty("--background", theme.background);
        root.style.setProperty("--text", theme.text);
        root.style.setProperty("--border-radius", theme.borderRadius);
        window.__THEME__ = theme;
      }

      function showFatalFallback() {
        const el = document.createElement("div");
        el.style.cssText =
          "position:fixed;top:40%;left:0;right:0;text-align:center;font-size:22px;margin:0 8px;color:#fff;background:#000;padding:20px;z-index:9999";
        el.innerHTML =
          "<h1>Un souci technique empÃªche lâ€™affichage complet ðŸ˜¢</h1><p>RÃ©essayez dans un instant. Le contenu reste accessible.</p>";
        document.body.appendChild(el);
      }

      boot().catch((e) => {
        console.error("Boot failed", e);
        showFatalFallback();
      });
    </script>

    <!-- Script bundle gÃ©nÃ©rÃ© par Vite -->
    <script type="module" src="assets/index-BkIUmdma.js" crossorigin></script>

    <!-- Google Translate (optionnel) -->
    <div id="google_translate_element"></div>
    <script>
      function googleTranslateElementInit() {
        new google.translate.TranslateElement(
          { pageLanguage: "fr", includedLanguages: "fr,en", layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
          "google_translate_element"
        );
      }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <style>
      #google_translate_element {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 9999;
      }
      .goog-logo-link,
      .goog-te-gadget span {
        display: none !important;
      }
    </style>
  </body>
</html>
